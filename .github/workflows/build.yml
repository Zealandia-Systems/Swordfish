name: build
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install GCC
        uses: carlosperate/arm-none-eabi-gcc-action@v1
        id: arm-none-eabi-gcc-action
        with:
          release: '10.3-2021.10'

      - name: Install Ninja
        uses: ashutoshvarma/setup-ninja@master
        with:
          version: 1.10.0

      - name: Checkout source
        uses: actions/checkout@v2
        with:
          submodules: recursive
        
      - name: CMake configure
        uses: ashutoshvarma/action-cmake-build@master
        with:
          build-dir: ${{runner.workspace}}/build
          configure-options: -G Ninja -DCMAKE_TOOLCHAIN_FILE=${{runner.workspace}}/cmake/toolchain-gcc.cmake